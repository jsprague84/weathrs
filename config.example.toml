# Weathrs Configuration
# Copy this file to config.toml or config.local.toml

# Required: OpenWeatherMap API key
openweathermap_api_key = "your_api_key_here"

# Server configuration
host = "0.0.0.0"
port = 3000

# Weather defaults
# Location can be city name or zip code:
#   "London"      - city name
#   "60601"       - US zip code (defaults to US)
#   "60601,US"    - zip with country code
#   "E14 5AB,GB"  - UK postal codes not supported (use city name)
default_city = "London"
units = "metric"  # metric, imperial, or standard

# Display configuration - what to show in weather response
[display]
temperature = true
feels_like = true
humidity = true
wind_speed = true
description = true
pressure = false
visibility = false

# Notification services (optional)
# Configure ntfy and/or gotify for push notifications

# ntfy - https://ntfy.sh
[notifications.ntfy]
url = "https://ntfy.sh"
topic = "your-weather-topic"
# token = "tk_your_token_here"  # Optional: for protected topics

# gotify - https://gotify.net
# [notifications.gotify]
# url = "https://gotify.example.com"
# token = "your_gotify_app_token"

# Scheduler configuration
[scheduler]
enabled = true

# Define scheduled forecast jobs
# Jobs run on a cron schedule and optionally send notifications
# Cron format: "sec min hour day month weekday" (6 fields, not 5!)

[[scheduler.jobs]]
id = "morning-weather"
name = "Morning Weather Report"
city = "Chicago"
units = "metric"
cron = "0 0 7 * * *"  # Every day at 7:00 AM (sec min hour day month weekday)
include_daily = true
include_hourly = false
enabled = true

# Notification triggers for this job
[scheduler.jobs.notify]
on_run = true               # Always notify when job runs
on_alert = true             # Notify on weather alerts
on_precipitation = true     # Notify when rain/snow likely (>50%)
cold_threshold = 0.0        # Notify when temp below this (Celsius)
heat_threshold = 35.0       # Notify when temp above this (Celsius)

# Example: Job using zip code
# [[scheduler.jobs]]
# id = "home-weather"
# name = "Home Weather"
# city = "90210"  # Beverly Hills by zip code
# units = "imperial"
# cron = "0 0 6 * * *"  # 6:00 AM daily
# include_daily = true
# include_hourly = false
# enabled = true
# [scheduler.jobs.notify]
# on_run = true
# on_alert = true

# Example: Job for international location
# [[scheduler.jobs]]
# id = "evening-london"
# name = "London Evening Update"
# city = "London,GB"
# units = "metric"
# cron = "0 0 18 * * *"  # 6:00 PM daily (sec min hour day month weekday)
# include_daily = true
# include_hourly = false
# enabled = true
# [scheduler.jobs.notify]
# on_run = true
# on_alert = true
